<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-tsx-4d87e34234477783176f.js" as="script"/><link rel="preload" href="/component---src-templates-post-tsx-9ea96117d0748b745c69.js" as="script"/><link rel="preload" href="/path---non-blocking-queue-94de25a63118452a4580.js" as="script"/><link rel="preload" href="/app-e763c1dfce3e9c4fb992.js" as="script"/><link rel="preload" href="/commons-a4508e8b006a525c8fb0.js" as="script"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true"></title><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="image" content="https://victoriaz.netlify.com/undefined"/><meta data-react-helmet="true" property="og:url" content="https://victoriaz.netlify.com///non-blocking-queue"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Non blocking single producer many consumers queue"/><meta data-react-helmet="true" property="og:description"/><meta data-react-helmet="true" property="og:image" content="https://victoriaz.netlify.com/undefined"/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:title" content="Non blocking single producer many consumers queue"/><meta data-react-helmet="true" name="twitter:description"/><meta data-react-helmet="true" name="twitter:image" content="https://victoriaz.netlify.com/undefined"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://victoriaz.netlify.com//","name":"Non blocking single producer many consumers queue","alternateName":""},[{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://victoriaz.netlify.com///non-blocking-queue","name":"Non blocking single producer many consumers queue","image":"https://victoriaz.netlify.com/undefined"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://victoriaz.netlify.com//","name":"Non blocking single producer many consumers queue","alternateName":"","headline":"Non blocking single producer many consumers queue","image":{"@type":"ImageObject","url":"https://victoriaz.netlify.com/undefined"}}]]</script><script>
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-116706361-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-116706361-1', 'auto');
      ga('set', 'anonymizeIp', 1);}
      </script><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#fff"/><style id="gatsby-inlined-css">@import url(https://cdn.jsdelivr.net/npm/instantsearch.css@7.0.0/themes/reset-min.css);@import url(https://fonts.googleapis.com/css?family=Share+Tech+Mono);@import url(https://fonts.googleapis.com/css?family=Cutive+Mono);/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}code[class*=language-],pre[class*=language-]{color:#fff;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#6c6c6d}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#c1def1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #333;background-color:#333}@media (max-width:1000px){code[class*=language-],pre[class*=language-]{font-size:85%;line-height:1.5em}}:not(pre)>code[class*=language-]{padding:.2em;padding-top:1px;padding-bottom:1px;background:#f8f8f8;border:1px solid #ddd}.token.comment{color:#a8a57b}.token.cdata,.token.doctype,.token.prolog{color:green;font-style:italic}.token.namespace{opacity:.7}.token.string{color:#a31515}.token.operator,.token.punctuation{color:#a53b93}.token.boolean,.token.constant,.token.inserted,.token.number,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.language-json .token.boolean,.language-json .token.number,.token.atrule,.token.attr-value,.token.keyword,code[class*=language-css]{color:#00ad09}.token.function{color:#393a34}.language-autohotkey .token.tag,.token.deleted{color:#9a050f}.language-autohotkey .token.keyword,.token.selector{color:#00009f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.language-json .token.property,.token.class-name{color:#2b91af}.token.selector,.token.tag{color:maroon}.token.attr-name,.token.entity,.token.property,.token.regex{color:red}.token.directive.tag .tag{background:#ff0;color:#393a34}.line-numbers .line-numbers-rows{border-right-color:#a5a5a5}.line-numbers-rows>span:before{color:#2b91af}.line-highlight{background:rgba(193,222,241,.2);background:linear-gradient(90deg,rgba(193,222,241,.2) 70%,rgba(221,222,241,0))}.blur{filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="10" /></filter></svg>#filter');filter:blur(10px);-webkit-filter:blur(10px)}:focus{outline:none}a{text-decoration:none}a,a:link{color:#000}a:hover{color:#f50057}body{background-color:#fff}.expand{margin-left:"auto";animation:spinup .5s linear forwards}.expandOpen{margin-left:"auto";animation:spindown .5s linear forwards}@keyframes spinup{50%{transform:rotate(90deg)}to{transform:rotate(180deg)}}@keyframes spindown{0%{transform:rotate(180deg)}50%{transform:rotate(90deg)}to{transform:rotate(0deg)}}.underline1{background:transparent;position:relative;display:inline-block;text-decoration:underline;-webkit-text-decoration-color:#7fdbff;text-decoration-color:#7fdbff;z-index:1}.underline1:before{content:"";position:absolute;display:inline-block;background:#7fdbff;width:100%;border-radius:5px;bottom:0;z-index:-1}.underline1:focus:before,.underline1:hover:before{animation:.5s forwards hover-v linear;animation-fill-mode:forwards}@keyframes hover-v{0%{transform:scaleX(0);height:1rem}45%{transform:scaleX(1.05);height:2rem}55%{height:2.3rem}to{transform:scaleX(1.05);height:2.5rem}}.underline{background-color:transparent;text-decoration:none;transition:background .15s cubic-bezier(.33,.66,.66,1);border-bottom:3px solid #b4e7f8;box-shadow:inset 0 -4px 0 #b4e7f8;word-break:break-word;word-wrap:break-word}.underline:hover{background-color:#b4e7f8;color:#000}.underline:after,.underline:before{box-sizing:border-box}::-moz-selection{background:#b4e7f8}::selection{background:#b4e7f8}.underline:-webkit-any-link{cursor:pointer}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-1760706997"><!-- react-empty: 2 --><div class="layouts__Default-s12gpxii-1 hNUXlZ" data-reactid="3"><div class="header__Header-bnmt84-1 RRKnr" data-reactid="4"><img class="header__Plane-bnmt84-0 fLLTOU" src="./img/Flying_Herk_in_the_Clouds.svg" data-reactid="5"/><h2 class="jss1067 jss1073 jss1087 jss1084 header__Title-bnmt84-2 eKHSUq" data-reactid="6"><a class="header__BlogLink-bnmt84-4 dGUCvB" href="https://victoriaz.netlify.com/" data-reactid="7"><div class="header__ResizesTitle-bnmt84-3 fvzUjo" data-reactid="8">VictoriaZ programming sketches</div></a></h2><header class="jss1099 jss1105 jss1091 jss1092 jss1096 mui-fixed navigationTop__Container-s119w7rt-2 bnSjTb" data-reactid="9"><div class="jss1126 navigationTop__Buttons-s119w7rt-1 isBKdx" data-reactid="10"><!-- react-empty: 11 --><div class="jss1127" data-reactid="12"><div class="jss1128 jss1129" style="margin-bottom:0;" role="tablist" data-reactid="13"><div class="jss1127" data-reactid="14"><a class="navigationTop__NavButton-s119w7rt-0 nqNsa" value="0" href="/" data-reactid="15"><button tabindex="0" class="jss1151 jss1135 jss1137" type="button" style="font-weight:900;" role="tab" data-reactid="16"><span class="jss1147" data-reactid="17"><span class="jss1148" data-reactid="18"><span class="jss1149" data-reactid="19">Home</span></span></span><span class="jss1154" data-reactid="20"></span></button></a><a class="navigationTop__NavButton-s119w7rt-0 nqNsa" value="1" href="/about" data-reactid="21"><button tabindex="0" class="jss1151 jss1135 jss1137" type="button" style="font-weight:900;" role="tab" data-reactid="22"><span class="jss1147" data-reactid="23"><span class="jss1148" data-reactid="24"><span class="jss1149" data-reactid="25">About</span></span></span><span class="jss1154" data-reactid="26"></span></button></a><a class="navigationTop__NavButton-s119w7rt-0 nqNsa" value="2" href="/tags" data-reactid="27"><button tabindex="0" class="jss1151 jss1135 jss1137" type="button" style="font-weight:900;" role="tab" data-reactid="28"><span class="jss1147" data-reactid="29"><span class="jss1148" data-reactid="30"><span class="jss1149" data-reactid="31">Tags</span></span></span><span class="jss1154" data-reactid="32"></span></button></a><a class="navigationTop__NavButton-s119w7rt-0 nqNsa" value="3" href="/repositories" data-reactid="33"><button tabindex="0" class="jss1151 jss1135 jss1137" type="button" style="font-weight:900;" role="tab" data-reactid="34"><span class="jss1147" data-reactid="35"><span class="jss1148" data-reactid="36"><span class="jss1149" data-reactid="37">Repositories</span></span></span><span class="jss1154" data-reactid="38"></span></button></a></div></div></div></div></header></div><div class="sidebar__Sidebar-s1j2sjxv-0 cpqdmZ" data-reactid="39"><div class="jss1099 jss1103 jss1100 navigation__Navigation-jp8mz3-0 CKreI" data-reactid="40"><div class="ais-InstantSearch__root" data-reactid="41"><div class="instantSearch__Container-qkiem3-0 eyVhqa" data-reactid="42"><div class="jss1161" style="width:80%;" data-reactid="43"><label class="jss1170 jss1165 jss1166 jss1169" data-shrink="false" for="search" data-reactid="44"><!-- react-text: 45 -->Search field<!-- /react-text --></label><div class="jss1176 jss1177 jss1180" data-reactid="46"><input type="search" aria-invalid="false" aria-required="false" class="jss1184 jss1188 jss1189" id="search" value="" data-reactid="47"/></div></div><div class="ais-Hits instantSearch__ResultsContainer-qkiem3-1 ZGQhv" data-reactid="48"><ul class="ais-Hits-list" data-reactid="49"></ul></div></div></div></div></div><div class="layouts__Content-s12gpxii-0 ctItLP" data-reactid="50"><div class="post__BlogPost-gix2jd-0 eVJyLr" data-reactid="51"><div id="fb-root" data-reactid="52"></div><!-- react-empty: 53 --><!-- react-empty: 54 --><div class="image__Underline-s40e6sq-0 fxmnZd" data-reactid="55"><div class=" gatsby-image-outer-wrapper" style="position:relative;" data-reactid="56"><div class="image image__Image-s40e6sq-1 ikMWRh gatsby-image-wrapper" style="position:relative;overflow:hidden;" data-reactid="57"><div style="width:100%;padding-bottom:75%;" data-reactid="58"></div><img alt="queue-front" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAYm0aTTo0f/EABgQAAMBAQAAAAAAAAAAAAAAAAABEQIS/9oACAEBAAEFAudGE73qRCgmj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAAyAiCh/9oACAEBAAY/Al0UaVP/xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhQWEx/9oACAEBAAE/IeaCp3K9lAwY0xKuRXgDBP/aAAwDAQACAAMAAAAQK9//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFRYYGh/9oACAEBAAE/ECyxgdu33sjuVYSeYCSjSsRMwKMgmwVfYJKCf//Z" style="position:absolute;top:0;left:0;transition:opacity 0.5s;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:0.25s;" data-reactid="59"/><noscript data-reactid="60"><img width="" height="" src="/static/queue-front-19bb4f461f4e5a1d63b42b426bd73322-d447e.jpg" srcset="/static/queue-front-19bb4f461f4e5a1d63b42b426bd73322-eed67.jpg 475w,
/static/queue-front-19bb4f461f4e5a1d63b42b426bd73322-f26f9.jpg 950w,
/static/queue-front-19bb4f461f4e5a1d63b42b426bd73322-d447e.jpg 1900w,
/static/queue-front-19bb4f461f4e5a1d63b42b426bd73322-3d50f.jpg 1920w" alt="queue-front" title="" sizes="(max-width: 1900px) 100vw, 1900px" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></noscript></div></div></div><div class="postHeader__PostHeader-gjhwgt-0 dflWXr" data-reactid="61"><h1 class="jss1067 jss1071 postHeader__Title-gjhwgt-1 eNFeOB" data-reactid="62"><a href="/non-blocking-queue" data-reactid="63"><span class="postHeader__ResizedText-gjhwgt-2 eBNOmZ" data-reactid="64">Non blocking single producer many consumers queue</span></a></h1><span class="jss1067 jss1077 postHeader__Date-gjhwgt-4 gQqoIC" data-reactid="65"><span class="postHeader__ResizedDate-gjhwgt-3 hVvinN" data-reactid="66">March 16, 2018</span></span><div class="tagsLine__TagLine-s10dgrgb-0 iovFoW" data-reactid="67"><a class="tagsLine__Tag-s10dgrgb-1 bxYUos" href="/tags/non-blocking/" data-reactid="68"><button tabindex="0" class="jss1151 jss1190 jss1192" type="button" data-reactid="69"><span class="jss1191" data-reactid="70"><span class="jss1067 jss1077 jss1087" data-reactid="71"><span class="tagsLine__ResizedText-s10dgrgb-2 bRHHPF" data-reactid="72">non-blocking</span></span></span><span class="jss1154" data-reactid="73"></span></button></a><a class="tagsLine__Tag-s10dgrgb-1 bxYUos" href="/tags/queue/" data-reactid="74"><button tabindex="0" class="jss1151 jss1190 jss1192" type="button" data-reactid="75"><span class="jss1191" data-reactid="76"><span class="jss1067 jss1077 jss1087" data-reactid="77"><span class="tagsLine__ResizedText-s10dgrgb-2 bRHHPF" data-reactid="78">queue</span></span></span><span class="jss1154" data-reactid="79"></span></button></a><a class="tagsLine__Tag-s10dgrgb-1 bxYUos" href="/tags/scala/" data-reactid="80"><button tabindex="0" class="jss1151 jss1190 jss1192" type="button" data-reactid="81"><span class="jss1191" data-reactid="82"><span class="jss1067 jss1077 jss1087" data-reactid="83"><span class="tagsLine__ResizedText-s10dgrgb-2 bRHHPF" data-reactid="84">Scala</span></span></span><span class="jss1154" data-reactid="85"></span></button></a></div></div><aside class="jss1067 jss1075 post__Text-gix2jd-2 uZYrZ" data-reactid="86"><span class="inner-text post__ResizedText-gix2jd-3 jzdKmY" id="text" data-reactid="87"><div style="text-align: center; width: 100%; margin-bottom: 50px;">
    <img src="/queue-ad096102018e606977143785d91ef139.gif" width="80%">
</div>
<p>Non-blocking algorithms allows threads to access shared state without blocking: locks, mutexes, semaphores etc. A blocking concurrency algorithm is an algorithm which can block the thread until the action can be performed safely.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">package</span> architect
<span class="token keyword">package</span> duna
<span class="token keyword">package</span> kernel

<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Throwable
<span class="token keyword">import</span> scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token punctuation">{</span> Either<span class="token punctuation">,</span> Left<span class="token punctuation">,</span> Right <span class="token punctuation">}</span>
<span class="token keyword">import</span> scala<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>ScalaRunTime<span class="token punctuation">.</span>_
<span class="token keyword">import</span> scala<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>ClassTag 
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ConcurrentLinkedQueue
<span class="token keyword">import</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>SortedMap

<span class="token keyword">trait</span> QueueIssue<span class="token punctuation">{</span>

    <span class="token keyword">val</span> message<span class="token operator">:</span> <span class="token builtin">String</span>

<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token keyword">class</span> CantDequeueEmptyQueue<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> QueueIssue<span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">val</span> message<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">"Can't dequeue for an empty queue."</span>

<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>  The queue is actually a circular buffer and two pointers, which point to the next writable element and the next readable element.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">case</span> <span class="token keyword">class</span> Queue<span class="token punctuation">[</span>

        <span class="token annotation punctuation">@specialized</span><span class="token punctuation">(</span><span class="token builtin">Short</span><span class="token punctuation">,</span> <span class="token builtin">Char</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Float</span><span class="token punctuation">,</span> <span class="token builtin">Long</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">AnyRef</span><span class="token punctuation">)</span> A<span class="token operator">:</span> ClassTag

    <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> size<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">self</span> <span class="token keyword">=></span>
</code></pre>
      </div>
<p>Both pointers start from the zero element. They have <a href="http://tutorials.jenkov.com/java-concurrency/volatile.html">@volatile</a> annotation, because we need every thread to have an access to the newest value of the variable.
Here is the write pointer.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token annotation punctuation">@volatile</span> <span class="token keyword">private</span> <span class="token keyword">var</span> writePointer<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre>
      </div>
<p>And the read pointer.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token annotation punctuation">@volatile</span> <span class="token keyword">private</span> <span class="token keyword">var</span> readPointer<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre>
      </div>
<p>We calculate an array size available on the machine. </p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">private</span> <span class="token keyword">val</span> availableSize <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token keyword">val</span> runtime <span class="token operator">=</span> Runtime<span class="token punctuation">.</span>getRuntime<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Hard coded values are: 32bits is Int size, 4 - memory share</span>
    <span class="token comment">// TODO: change integer zite to A size</span>
    <span class="token punctuation">(</span>runtime<span class="token punctuation">.</span>freeMemory<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toInt 

<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>We check the input size. If it is less than one, we make 100000 array (because I want so). </p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">val</span> actualSize <span class="token operator">=</span> size <span class="token keyword">match</span> <span class="token punctuation">{</span>

    <span class="token keyword">case</span> number <span class="token keyword">if</span><span class="token punctuation">(</span>number <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">=></span> <span class="token number">100000</span>

    <span class="token keyword">case</span> number <span class="token keyword">if</span><span class="token punctuation">(</span>number <span class="token operator">></span> availableSize<span class="token punctuation">)</span> <span class="token keyword">=></span> availableSize

    <span class="token keyword">case</span> number <span class="token keyword">=></span> number

<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Then we calculate physical location of the pointers in the array buffer. It should be from 0 to actual array size. So we need to find a reminder of current pointer position and actual array size. </p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">private</span> <span class="token keyword">def</span> physicalReadPointer<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    readPointer  <span class="token operator">%</span> actualSize

<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">def</span> physicalWritePointer<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    writePointer  <span class="token operator">%</span> actualSize

<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Here is a buffer array, where we keep all the data.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">private</span> <span class="token keyword">val</span> store<span class="token operator">:</span> Array<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> Array<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>actualSize<span class="token punctuation">)</span> 
</code></pre>
      </div>
<p>And the next one is for backpressure. I’ll write about it below…</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">private</span> <span class="token keyword">val</span> tmpStore<span class="token operator">:</span> ConcurrentLinkedQueue<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> ConcurrentLinkedQueue<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>Whenever a write pointer is bigger than array size, we put next elements into the tmpStore. It is a backpressure strategy. If a producer is faster than consumer, then the default array is not enough. We start using tmpStore, which help us under heavy load. But it can cause an OutOfMemoryException exeption. Type of the tmpStore is ConcurrentLinkedQueue, so it is not limited and can be dynamically resized. Why we didn’t do it before?
Because any linked list based data structure with unknown length at runtime replaces itself with a new allocated structure when the capacity is exceeded. A new structure is allocated and a previous one is collected multiple times. This process can generate a lot of garbage and lead to memory leak.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">def</span> enqueue<span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token keyword">=></span> A<span class="token punctuation">)</span><span class="token operator">:</span> Either<span class="token punctuation">[</span>A<span class="token punctuation">,</span> QueueIssue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// The queue is full, can't rewrite an element which hasn't been read</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>writePointer <span class="token operator">>=</span> actualSize<span class="token punctuation">)</span><span class="token punctuation">{</span> 

        tmpStore<span class="token punctuation">.</span>add<span class="token punctuation">(</span>value<span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">// Enqueue a new element</span>
        store<span class="token punctuation">.</span>update<span class="token punctuation">(</span>phisicalWritePointer<span class="token punctuation">,</span> value<span class="token punctuation">)</span> 

    <span class="token punctuation">}</span>
     <span class="token comment">// Move writePointer to the next slot</span>
    <span class="token keyword">val</span> newWritePointer <span class="token operator">=</span> writePointer <span class="token operator">+</span> <span class="token number">1</span>

    writePointer <span class="token operator">=</span> newWritePointer

    Left<span class="token punctuation">(</span>value<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>The next method extracts next value from the queue.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">def</span> dequeue<span class="token operator">:</span> Either<span class="token punctuation">[</span>A<span class="token punctuation">,</span> QueueIssue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>isEmpty<span class="token punctuation">)</span><span class="token punctuation">{</span> 
    
        Right<span class="token punctuation">{</span>CantDequeueEmptyQueue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

        <span class="token keyword">val</span> res <span class="token operator">=</span> <span class="token keyword">if</span><span class="token punctuation">(</span>readPointer <span class="token operator">&lt;</span> actualSize <span class="token operator">||</span> tmpStore<span class="token punctuation">.</span>isEmpty<span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">val</span> value <span class="token operator">=</span> store<span class="token punctuation">(</span>phisicalReadPointer<span class="token punctuation">)</span> 

            value

        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            
            <span class="token keyword">val</span> dec <span class="token operator">=</span> tmpStore<span class="token punctuation">.</span>poll

            store<span class="token punctuation">(</span>phisicalReadPointer<span class="token punctuation">)</span> <span class="token operator">=</span> dec

            dec

        <span class="token punctuation">}</span>
        
        <span class="token keyword">val</span> newReadPointer <span class="token operator">=</span> readPointer <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// the next pointer can point at an empty slot, will check on the next dequeue</span>
        
        readPointer <span class="token operator">=</span> newReadPointer

        Left<span class="token punctuation">(</span>res<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>The queue is empty or the next pointer points to an empty slot.</p>
<div class="gatsby-highlight">
      <pre class="language-scalascala"><code class="language-scalascala"><span class="token keyword">def</span> isEmpty<span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    readPointer <span class="token operator">==</span> writePointer

<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div></span></aside><div title="Non blocking single producer many consumers queue" data-reactid="88"><div id="disqus_thread" data-reactid="89"></div><noscript data-reactid="90"><span data-reactid="91"><!-- react-text: 92 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="93">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="94"><!-- react-text: 95 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="96">Disqus</span><!-- react-text: 97 -->.<!-- /react-text --></a></div></div></div><div class="footer__Footer-s1qp0f72-0 kIDVgZ" data-reactid="98"><div class="socialButtons__Buttons-g3vte5-1 ffvIap" data-reactid="99"><div class="jss1205" data-reactid="100"><a class="socialButtons__Link-g3vte5-0 gaJzCe" href="https://github.com/garrynsk" aria-describedby="tooltip-top" data-reactid="101"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="102"><g data-reactid="103"><path d="m14.6 26.8q0.1-0.1-0.1-0.3-0.2-0.2-0.3 0-0.1 0.1 0.1 0.2 0.2 0.2 0.3 0.1z m-0.6-0.9q-0.2-0.2-0.3-0.1-0.1 0.1 0 0.3 0.1 0.1 0.3 0.1 0.1-0.1 0-0.3z m-1-0.9q0.1-0.1-0.1-0.2-0.1 0-0.1 0-0.1 0.2 0 0.2 0.2 0.1 0.2 0z m0.5 0.5q0.1 0 0-0.1t0-0.1q-0.2-0.2-0.3-0.1t0.1 0.3q0.1 0.1 0.2 0z m1.9 1.7q0.1-0.2-0.2-0.3-0.2 0-0.3 0.1 0 0.2 0.2 0.3 0.2 0 0.3-0.1z m1 0q0-0.1-0.3-0.1-0.2 0-0.2 0.1t0.2 0.2 0.3-0.2z m0.8-0.1q0-0.2-0.2-0.1t-0.2 0.2q0 0.1 0.2 0.1t0.2-0.2z m14.4-7.1q0-4.7-3.4-8.1t-8.1-3.3-8 3.3-3.4 8.1q0 3.7 2.2 6.7t5.6 4.1q0.4 0.1 0.6-0.1t0.2-0.4q0-1.2 0-2.1-0.1 0-0.4 0t-0.8 0.1-1-0.1-1-0.5-0.7-0.9q-0.5-1.3-1.2-1.6-0.1-0.1-0.1-0.1l-0.2-0.2-0.2-0.2 0.1-0.2 0.5-0.1q0.1 0 0.3 0.1t0.7 0.3 0.7 0.8q0.4 0.7 0.8 1t1 0.3 0.9-0.1 0.6-0.2q0.2-1.1 0.8-1.6-1.1-0.1-1.9-0.4t-1.7-0.8-1.2-1.7-0.5-2.7q0-1.8 1.2-3.1-0.5-1.3 0.1-3 0.5-0.1 1.3 0.2t1.3 0.6l0.6 0.4q1.3-0.4 2.8-0.4t2.9 0.4q0.3-0.2 0.6-0.4t1.3-0.6 1.3-0.2q0.6 1.7 0.1 3 1.1 1.3 1.1 3.1 0 1.3-0.3 2.2t-0.8 1.6-1.2 1-1.3 0.6-1.6 0.2q0.8 0.7 0.8 2.2 0 0.9 0 2t0 1.1q0 0.3 0.2 0.4t0.6 0.1q3.4-1.1 5.6-4.1t2.2-6.7z m5.7-10.7v21.4q0 2.7-1.9 4.6t-4.5 1.8h-21.5q-2.6 0-4.5-1.8t-1.9-4.6v-21.4q0-2.7 1.9-4.6t4.5-1.8h21.5q2.6 0 4.5 1.8t1.9 4.6z" data-reactid="104"></path></g></svg></a><div style="position:absolute;pointer-events:none;opacity:0;top:0;left:0;" class="jss1206 jss1207" data-reactid="105"><div id="tooltip-top" role="tooltip" aria-hidden="true" class="jss1208 jss1211" data-reactid="106">Me on GitHub</div></div></div><div class="jss1205" data-reactid="107"><a class="socialButtons__Link-g3vte5-0 gaJzCe" href="https://twitter.com/zakharovavi" aria-describedby="tooltip-top" data-reactid="108"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="109"><g data-reactid="110"><path d="m31.6 13.6q-1.3 0.6-2.7 0.8 1.5-0.9 2-2.6-1.4 0.8-2.9 1.1-1.4-1.5-3.5-1.5-1.9 0-3.3 1.4t-1.3 3.3q0 0.7 0.1 1.1-2.9-0.2-5.4-1.5t-4.3-3.4q-0.7 1.1-0.7 2.3 0 2.6 2.1 3.9-1.1 0-2.3-0.5v0q0 1.7 1.1 3t2.8 1.6q-0.7 0.2-1.1 0.2-0.3 0-0.9-0.1 0.4 1.4 1.6 2.3t2.8 1q-2.6 2-5.9 2-0.6 0-1.1-0.1 3.3 2.1 7.2 2.1 2.5 0 4.7-0.8t3.7-2.1 2.7-3.1 1.7-3.6 0.5-3.7q0-0.4 0-0.7 1.4-1 2.4-2.4z m5.7-4.3v21.4q0 2.7-1.9 4.6t-4.5 1.8h-21.5q-2.6 0-4.5-1.8t-1.9-4.6v-21.4q0-2.7 1.9-4.6t4.5-1.8h21.5q2.6 0 4.5 1.8t1.9 4.6z" data-reactid="111"></path></g></svg></a><div style="position:absolute;pointer-events:none;opacity:0;top:0;left:0;" class="jss1206 jss1207" data-reactid="112"><div id="tooltip-top" role="tooltip" aria-hidden="true" class="jss1208 jss1211" data-reactid="113">Me on Twitter</div></div></div><div class="jss1205" data-reactid="114"><a class="socialButtons__Link-g3vte5-0 gaJzCe" href="https://victoriaz.netlify.com/" aria-describedby="tooltip-top" data-reactid="115"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="116"><g data-reactid="117"><path d="m8.3 31.6h5.1v-15.5h-5.1v15.5z m5.5-20.3q0-1.2-0.8-1.9t-2.1-0.8-2.1 0.8-0.8 1.9q0 1.1 0.8 1.9t2 0.8h0.1q1.3 0 2.1-0.8t0.8-1.9z m13 20.3h5.2v-8.9q0-3.5-1.6-5.2t-4.3-1.8q-3.1 0-4.7 2.6h0v-2.2h-5.1q0 1.4 0 15.5h5.1v-8.7q0-0.8 0.2-1.2 0.3-0.8 1-1.4t1.7-0.5q2.5 0 2.5 3.5v8.3z m10.5-22.3v21.4q0 2.7-1.9 4.6t-4.5 1.8h-21.5q-2.6 0-4.5-1.8t-1.9-4.6v-21.4q0-2.7 1.9-4.6t4.5-1.8h21.5q2.6 0 4.5 1.8t1.9 4.6z" data-reactid="118"></path></g></svg></a><div style="position:absolute;pointer-events:none;opacity:0;top:0;left:0;" class="jss1206 jss1207" data-reactid="119"><div id="tooltip-top" role="tooltip" aria-hidden="true" class="jss1208 jss1211" data-reactid="120">Me on Linkedn</div></div></div><div class="jss1205" data-reactid="121"><a class="socialButtons__Link-g3vte5-0 gaJzCe" href="https://www.facebook.com/nitrographceo" aria-describedby="tooltip-top" data-reactid="122"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="123"><g data-reactid="124"><path d="m30.9 2.9q2.6 0 4.5 1.8t1.9 4.6v21.4q0 2.7-1.9 4.6t-4.5 1.8h-4.2v-13.2h4.4l0.7-5.2h-5.1v-3.3q0-1.3 0.5-1.9t2-0.6l2.8 0v-4.7q-1.5-0.2-4-0.2-3.1 0-4.9 1.8t-1.8 5.1v3.8h-4.5v5.2h4.5v13.2h-11.9q-2.6 0-4.5-1.8t-1.9-4.6v-21.4q0-2.7 1.9-4.6t4.5-1.8h21.5z" data-reactid="125"></path></g></svg></a><div style="position:absolute;pointer-events:none;opacity:0;top:0;left:0;" class="jss1206 jss1207" data-reactid="126"><div id="tooltip-top" role="tooltip" aria-hidden="true" class="jss1208 jss1211" data-reactid="127">Me on Facebook</div></div></div></div><div class="navigationBottom__Navigation-s1pr7f43-0 dXfriP" data-reactid="128"><div class="jss1214" data-reactid="129"><a class="navigationBottom__NavButton-s1pr7f43-1 jfwhYI" value="0" href="/" data-reactid="130"><button tabindex="0" class="jss1151 jss1215" type="button" aria-label="Home" value="/" data-reactid="131"><span class="jss1220" data-reactid="132"><svg class="jss1221" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-reactid="133"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" data-reactid="134"></path></svg></span><span class="jss1154" data-reactid="135"></span></button></a><a class="navigationBottom__NavButton-s1pr7f43-1 jfwhYI" value="1" href="/about" data-reactid="136"><button tabindex="0" class="jss1151 jss1215" type="button" aria-label="About" value="/about" data-reactid="137"><span class="jss1220" data-reactid="138"><svg class="jss1221" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-reactid="139"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z" data-reactid="140"></path></svg></span><span class="jss1154" data-reactid="141"></span></button></a><a class="navigationBottom__NavButton-s1pr7f43-1 jfwhYI" value="2" href="/tags" data-reactid="142"><button tabindex="0" class="jss1151 jss1215" type="button" aria-label="Tags" value="/tags" data-reactid="143"><span class="jss1220" data-reactid="144"><svg class="jss1221" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-reactid="145"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" data-reactid="146"></path></svg></span><span class="jss1154" data-reactid="147"></span></button></a><a class="navigationBottom__NavButton-s1pr7f43-1 jfwhYI" value="3" href="/repositories" data-reactid="148"><button tabindex="0" class="jss1151 jss1215" type="button" aria-label="Repositories" value="/repositories" data-reactid="149"><span class="jss1220" data-reactid="150"><svg class="jss1221" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-reactid="151"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" data-reactid="152"></path></svg></span><span class="jss1154" data-reactid="153"></span></button></a></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-e763c1dfce3e9c4fb992.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","178469467687848":"component---src-pages-404-tsx-c3f1179ef31e3033d235.js","147894599050189":"component---src-pages-about-tsx-66d08cf685338c4f5ed2.js","221374088121123":"component---src-pages-index-tsx-487047d276cc1079cb05.js","183170472236854":"component---src-pages-repositories-tsx-35bddb6bf48e4b93ecd5.js","88133074308889":"component---src-pages-tags-tsx-3c1b2a7a431ddee2dce7.js","30862416422887":"component---src-templates-post-tsx-9ea96117d0748b745c69.js","268655982550610":"component---src-templates-tags-tsx-fe121a48e0424f9eb760.js","60335399758886":"path----779e5b5d60cb8a2aaf7f.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","273950069227526":"path---about-7a621110360ebafb502e.js","142629428675168":"path---index-623c950a6c7eb5ea2722.js","207787986173859":"path---repositories-44bfeef05df2f0f01bd6.js","55702396619907":"path---tags-9d396a1265c25d77a34a.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","229356351917441":"path---non-blocking-queue-94de25a63118452a4580.js","137338694918600":"path---mock-article-4c67c877deb234074493.js","170358752846131":"path---monads-d5f465ca5c71b72b13cd.js","209885067577634":"path---tags-non-blocking-bcd612996248850c70b4.js","79465324930463":"path---tags-queue-0d0790c422e7001f767f.js","247966473797167":"path---tags-scala-18c895b4a9a2822ff0e3.js","242698867188406":"path---tags-random-248e6c7d20ccdc2f3a81.js","197519439810120":"path---tags-monads-5e6d8d9430811a4e5601.js","22676092666560":"component---src-layouts-index-tsx-4d87e34234477783176f.js"}/*]]>*/</script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script>window.fbAsyncInit = function() {
  FB.init({
    appId      : 2021718294759147,
    xfbml      : true,
    version    : 'v2.12'
  });

  FB.AppEvents.logPageView();

};

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "https://connect.facebook.net/en_US/sdk.js";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-a4508e8b006a525c8fb0.js","/app-e763c1dfce3e9c4fb992.js","/path---non-blocking-queue-94de25a63118452a4580.js","/component---src-templates-post-tsx-9ea96117d0748b745c69.js","/component---src-layouts-index-tsx-4d87e34234477783176f.js"])/*]]>*/</script></body></html>